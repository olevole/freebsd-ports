--- CMakeLists.txt.orig	2011-03-17 03:21:07.000000000 +0300
+++ CMakeLists.txt	2012-12-27 18:53:37.737597727 +0400
@@ -45,6 +45,10 @@
     MESSAGE( "Compiling as ${CMAKE_BUILD_TYPE}" )
 ENDIF(NOT CMAKE_BUILD_TYPE)
 
+OPTION(ENABLE_DEMO
+  "build demo"
+  OFF)
+
 OPTION(ENABLE_DEBUG
   "enable debug support"
   OFF)
@@ -157,13 +161,15 @@
 ADD_SUBDIRECTORY (src/shared)
 ADD_SUBDIRECTORY (src/core)
 ADD_SUBDIRECTORY (src/test)
-ADD_SUBDIRECTORY (src/demo EXCLUDE_FROM_ALL)
+IF ( ENABLE_DEMO )
+	ADD_SUBDIRECTORY (src/demo)
+ENDIF ( ENABLE_DEMO )
 IF ( BUILD_CONTRIBS )
-  ADD_SUBDIRECTORY (src/contribs EXCLUDE_FROM_ALL)
+  ADD_SUBDIRECTORY (src/contribs)
   SET(BUILD_CONTRIBS_LIB 1)
 ENDIF ( BUILD_CONTRIBS )
 IF ( BUILD_CONTRIBS_LIB )
-  ADD_SUBDIRECTORY (src/contribs-lib EXCLUDE_FROM_ALL)
+  ADD_SUBDIRECTORY (src/contribs-lib)
 ENDIF ( BUILD_CONTRIBS_LIB )
 
 
